<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mathieu Thomassin">
<meta name="dcterms.date" content="2024-08-31">
<meta name="keywords" content="cybersécurité, machine learning, stage, rapport">
<meta name="description" content="Un rapport détaillé sur mon stage de 3e année au SOC, couvrant divers aspects de la cybersécurité et du machine learning.">

<title>Rapport de stage 3A: Machine Learning appliqué à la cybersécurité – rapport</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">rapport</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.pdf"> 
<span class="menu-text">Télécharger PDF</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#table-des-matières" id="toc-table-des-matières" class="nav-link active" data-scroll-target="#table-des-matières">Table des matières</a></li>
  <li><a href="#présentation-du-stagiaire-et-du-maître-de-stage" id="toc-présentation-du-stagiaire-et-du-maître-de-stage" class="nav-link" data-scroll-target="#présentation-du-stagiaire-et-du-maître-de-stage">Présentation du stagiaire et du maître de stage</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#présentation-de-lorganisation" id="toc-présentation-de-lorganisation" class="nav-link" data-scroll-target="#présentation-de-lorganisation">Présentation de l’organisation</a></li>
  <li><a href="#contexte-général-du-stage" id="toc-contexte-général-du-stage" class="nav-link" data-scroll-target="#contexte-général-du-stage">Contexte général du stage</a></li>
  <li><a href="#objectifs-du-stage" id="toc-objectifs-du-stage" class="nav-link" data-scroll-target="#objectifs-du-stage">Objectifs du stage</a></li>
  <li><a href="#importance-de-la-mission-pour-linsee" id="toc-importance-de-la-mission-pour-linsee" class="nav-link" data-scroll-target="#importance-de-la-mission-pour-linsee">Importance de la mission pour l’Insee</a></li>
  <li><a href="#contexte-général-du-stage-1" id="toc-contexte-général-du-stage-1" class="nav-link" data-scroll-target="#contexte-général-du-stage-1">Contexte général du stage</a></li>
  <li><a href="#importance-de-la-cybersécurité-et-du-machine-learning-dans-ce-domaine" id="toc-importance-de-la-cybersécurité-et-du-machine-learning-dans-ce-domaine" class="nav-link" data-scroll-target="#importance-de-la-cybersécurité-et-du-machine-learning-dans-ce-domaine">Importance de la cybersécurité et du machine learning dans ce domaine</a></li>
  <li><a href="#objectifs-du-stage-1" id="toc-objectifs-du-stage-1" class="nav-link" data-scroll-target="#objectifs-du-stage-1">Objectifs du stage</a></li>
  </ul></li>
  <li><a href="#découverte-et-contexte" id="toc-découverte-et-contexte" class="nav-link" data-scroll-target="#découverte-et-contexte">1. Découverte et Contexte</a>
  <ul class="collapse">
  <li><a href="#premiers-pas-dans-le-stage-enthousiasme-et-incertitude" id="toc-premiers-pas-dans-le-stage-enthousiasme-et-incertitude" class="nav-link" data-scroll-target="#premiers-pas-dans-le-stage-enthousiasme-et-incertitude">Premiers pas dans le stage : Enthousiasme et incertitude</a></li>
  <li><a href="#introduction-à-la-cybersécurité-définition-et-importance" id="toc-introduction-à-la-cybersécurité-définition-et-importance" class="nav-link" data-scroll-target="#introduction-à-la-cybersécurité-définition-et-importance">Introduction à la cybersécurité : Définition et importance</a></li>
  <li><a href="#présentation-de-léquipe-soc-et-du-système-dinformation-si" id="toc-présentation-de-léquipe-soc-et-du-système-dinformation-si" class="nav-link" data-scroll-target="#présentation-de-léquipe-soc-et-du-système-dinformation-si">Présentation de l’équipe SOC et du système d’information (SI)</a></li>
  <li><a href="#compréhension-du-siem-et-des-logs" id="toc-compréhension-du-siem-et-des-logs" class="nav-link" data-scroll-target="#compréhension-du-siem-et-des-logs">Compréhension du SIEM et des logs</a></li>
  </ul></li>
  <li><a href="#recherche-et-collecte-de-données" id="toc-recherche-et-collecte-de-données" class="nav-link" data-scroll-target="#recherche-et-collecte-de-données">2. Recherche et Collecte de Données</a>
  <ul class="collapse">
  <li><a href="#attente-de-splunk-et-recherche-de-datasets-pertinents" id="toc-attente-de-splunk-et-recherche-de-datasets-pertinents" class="nav-link" data-scroll-target="#attente-de-splunk-et-recherche-de-datasets-pertinents">Attente de Splunk et recherche de datasets pertinents</a></li>
  <li><a href="#présentation-des-premières-données-obtenues" id="toc-présentation-des-premières-données-obtenues" class="nav-link" data-scroll-target="#présentation-des-premières-données-obtenues">Présentation des premières données obtenues</a></li>
  </ul></li>
  <li><a href="#choix-des-problèmes-et-des-outils-de-machine-learning" id="toc-choix-des-problèmes-et-des-outils-de-machine-learning" class="nav-link" data-scroll-target="#choix-des-problèmes-et-des-outils-de-machine-learning">3. Choix des Problèmes et des Outils de Machine Learning</a>
  <ul class="collapse">
  <li><a href="#définition-des-problèmes-de-machine-learning-en-cybersécurité" id="toc-définition-des-problèmes-de-machine-learning-en-cybersécurité" class="nav-link" data-scroll-target="#définition-des-problèmes-de-machine-learning-en-cybersécurité">Définition des problèmes de machine learning en cybersécurité</a></li>
  <li><a href="#introduction-à-scikit-learn-et-choix-des-modèles" id="toc-introduction-à-scikit-learn-et-choix-des-modèles" class="nav-link" data-scroll-target="#introduction-à-scikit-learn-et-choix-des-modèles">Introduction à Scikit-learn et choix des modèles</a></li>
  <li><a href="#formation-à-linterprétabilité-des-modèles" id="toc-formation-à-linterprétabilité-des-modèles" class="nav-link" data-scroll-target="#formation-à-linterprétabilité-des-modèles">Formation à l’interprétabilité des modèles</a></li>
  </ul></li>
  <li><a href="#exploration-de-modèles-et-outils-avancés" id="toc-exploration-de-modèles-et-outils-avancés" class="nav-link" data-scroll-target="#exploration-de-modèles-et-outils-avancés">4. Exploration de Modèles et Outils Avancés</a>
  <ul class="collapse">
  <li><a href="#essais-avec-xgboost-pour-la-classification-des-malwares" id="toc-essais-avec-xgboost-pour-la-classification-des-malwares" class="nav-link" data-scroll-target="#essais-avec-xgboost-pour-la-classification-des-malwares">Essais avec XGBoost pour la classification des malwares</a></li>
  <li><a href="#découverte-de-mlflow-et-utilisation-de-lapi" id="toc-découverte-de-mlflow-et-utilisation-de-lapi" class="nav-link" data-scroll-target="#découverte-de-mlflow-et-utilisation-de-lapi">Découverte de MLflow et utilisation de l’API</a></li>
  <li><a href="#introduction-au-deep-learning-avec-le-livre-deep-learning-from-scratch-dlfs" id="toc-introduction-au-deep-learning-avec-le-livre-deep-learning-from-scratch-dlfs" class="nav-link" data-scroll-target="#introduction-au-deep-learning-avec-le-livre-deep-learning-from-scratch-dlfs">Introduction au deep learning avec le livre “Deep Learning from Scratch” (DLFS)</a></li>
  <li><a href="#exploration-des-design-patterns-en-deep-learning" id="toc-exploration-des-design-patterns-en-deep-learning" class="nav-link" data-scroll-target="#exploration-des-design-patterns-en-deep-learning">Exploration des design patterns en deep learning</a></li>
  </ul></li>
  <li><a href="#anomaly-detection-et-modèles-de-classification" id="toc-anomaly-detection-et-modèles-de-classification" class="nav-link" data-scroll-target="#anomaly-detection-et-modèles-de-classification">5. Anomaly Detection et Modèles de Classification</a>
  <ul class="collapse">
  <li><a href="#détour-par-la-détection-danomalies-difficultés-et-recentrage" id="toc-détour-par-la-détection-danomalies-difficultés-et-recentrage" class="nav-link" data-scroll-target="#détour-par-la-détection-danomalies-difficultés-et-recentrage">Détour par la détection d’anomalies : Difficultés et recentrage</a></li>
  <li><a href="#analyses-simples-avec-knn-et-clustering" id="toc-analyses-simples-avec-knn-et-clustering" class="nav-link" data-scroll-target="#analyses-simples-avec-knn-et-clustering">Analyses simples avec KNN et clustering</a></li>
  <li><a href="#analyse-des-données-http-et-détection-des-attaques-ex.-ddos" id="toc-analyse-des-données-http-et-détection-des-attaques-ex.-ddos" class="nav-link" data-scroll-target="#analyse-des-données-http-et-détection-des-attaques-ex.-ddos">Analyse des données HTTP et détection des attaques (ex. DDOS)</a></li>
  <li><a href="#focalisation-sur-lanalyse-des-url-et-compréhension-des-attaques" id="toc-focalisation-sur-lanalyse-des-url-et-compréhension-des-attaques" class="nav-link" data-scroll-target="#focalisation-sur-lanalyse-des-url-et-compréhension-des-attaques">Focalisation sur l’analyse des URL et compréhension des attaques</a></li>
  </ul></li>
  <li><a href="#exploration-darticles-scientifiques" id="toc-exploration-darticles-scientifiques" class="nav-link" data-scroll-target="#exploration-darticles-scientifiques">6. Exploration d’Articles Scientifiques</a>
  <ul class="collapse">
  <li><a href="#lecture-et-analyse-de-larticle-machine-learning-for-cybersecurity-applications-de-la-west-virginia-university-wvu" id="toc-lecture-et-analyse-de-larticle-machine-learning-for-cybersecurity-applications-de-la-west-virginia-university-wvu" class="nav-link" data-scroll-target="#lecture-et-analyse-de-larticle-machine-learning-for-cybersecurity-applications-de-la-west-virginia-university-wvu">Lecture et analyse de l’article “Machine Learning for Cybersecurity Applications” de la West Virginia University (WVU)</a></li>
  <li><a href="#étude-de-a-comprehensive-review-of-anomaly-detection-in-web-logs-du-hasso-plattner-institute-hpi" id="toc-étude-de-a-comprehensive-review-of-anomaly-detection-in-web-logs-du-hasso-plattner-institute-hpi" class="nav-link" data-scroll-target="#étude-de-a-comprehensive-review-of-anomaly-detection-in-web-logs-du-hasso-plattner-institute-hpi">Étude de “A Comprehensive Review of Anomaly Detection in Web Logs” du Hasso Plattner Institute (HPI)</a></li>
  <li><a href="#analyse-de-larticle-crisis2020_easychair_pid_011" id="toc-analyse-de-larticle-crisis2020_easychair_pid_011" class="nav-link" data-scroll-target="#analyse-de-larticle-crisis2020_easychair_pid_011">Analyse de l’article “CRISIS2020_EasyChair_PID_011”</a></li>
  <li><a href="#exploration-de-conf_sin2022__swaf-pour-le-développement-dun-pare-feu-applicatif-basé-sur-du-machine-learning" id="toc-exploration-de-conf_sin2022__swaf-pour-le-développement-dun-pare-feu-applicatif-basé-sur-du-machine-learning" class="nav-link" data-scroll-target="#exploration-de-conf_sin2022__swaf-pour-le-développement-dun-pare-feu-applicatif-basé-sur-du-machine-learning">Exploration de “Conf_SIN2022__SWAF” pour le développement d’un pare-feu applicatif basé sur du machine learning</a></li>
  </ul></li>
  <li><a href="#modélisation-et-évaluation-des-modèles" id="toc-modélisation-et-évaluation-des-modèles" class="nav-link" data-scroll-target="#modélisation-et-évaluation-des-modèles">7. Modélisation et Évaluation des Modèles</a>
  <ul class="collapse">
  <li><a href="#modélisation-des-url-knn-svm-regression-logistique-cnn" id="toc-modélisation-des-url-knn-svm-regression-logistique-cnn" class="nav-link" data-scroll-target="#modélisation-des-url-knn-svm-regression-logistique-cnn">Modélisation des URL : KNN, SVM, regression logistique, CNN</a></li>
  <li><a href="#utilisation-de-chatgpt-et-des-gpu-pour-accélérer-le-développement" id="toc-utilisation-de-chatgpt-et-des-gpu-pour-accélérer-le-développement" class="nav-link" data-scroll-target="#utilisation-de-chatgpt-et-des-gpu-pour-accélérer-le-développement">Utilisation de ChatGPT et des GPU pour accélérer le développement</a></li>
  <li><a href="#organisation-des-priorités-et-gestion-des-expérimentations" id="toc-organisation-des-priorités-et-gestion-des-expérimentations" class="nav-link" data-scroll-target="#organisation-des-priorités-et-gestion-des-expérimentations">Organisation des priorités et gestion des expérimentations</a></li>
  </ul></li>
  <li><a href="#travail-avec-splunk-et-pipelines" id="toc-travail-avec-splunk-et-pipelines" class="nav-link" data-scroll-target="#travail-avec-splunk-et-pipelines">8. Travail avec Splunk et Pipelines</a>
  <ul class="collapse">
  <li><a href="#traitement-des-données-splunk-en-préproduction" id="toc-traitement-des-données-splunk-en-préproduction" class="nav-link" data-scroll-target="#traitement-des-données-splunk-en-préproduction">Traitement des données Splunk en préproduction</a></li>
  <li><a href="#tokenization-des-url-et-limitations" id="toc-tokenization-des-url-et-limitations" class="nav-link" data-scroll-target="#tokenization-des-url-et-limitations">Tokenization des URL et limitations</a></li>
  <li><a href="#développement-de-pipelines-et-utilisation-de-gridsearchcv" id="toc-développement-de-pipelines-et-utilisation-de-gridsearchcv" class="nav-link" data-scroll-target="#développement-de-pipelines-et-utilisation-de-gridsearchcv">Développement de pipelines et utilisation de GridsearchCV</a></li>
  <li><a href="#évaluation-des-performances-des-modèles" id="toc-évaluation-des-performances-des-modèles" class="nav-link" data-scroll-target="#évaluation-des-performances-des-modèles">Évaluation des performances des modèles</a></li>
  </ul></li>
  <li><a href="#expérimentations-et-déploiement" id="toc-expérimentations-et-déploiement" class="nav-link" data-scroll-target="#expérimentations-et-déploiement">9. Expérimentations et Déploiement</a>
  <ul class="collapse">
  <li><a href="#utilisation-de-mlflow-pour-la-gestion-des-expérimentations" id="toc-utilisation-de-mlflow-pour-la-gestion-des-expérimentations" class="nav-link" data-scroll-target="#utilisation-de-mlflow-pour-la-gestion-des-expérimentations">Utilisation de MLFlow pour la gestion des expérimentations</a></li>
  <li><a href="#apprentissage-à-requêter-et-déployer-un-modèle-via-une-api" id="toc-apprentissage-à-requêter-et-déployer-un-modèle-via-une-api" class="nav-link" data-scroll-target="#apprentissage-à-requêter-et-déployer-un-modèle-via-une-api">Apprentissage à requêter et déployer un modèle via une API</a></li>
  <li><a href="#déploiement-sur-un-cluster-kubernetes-et-gestion-du-preprocessing" id="toc-déploiement-sur-un-cluster-kubernetes-et-gestion-du-preprocessing" class="nav-link" data-scroll-target="#déploiement-sur-un-cluster-kubernetes-et-gestion-du-preprocessing">Déploiement sur un cluster Kubernetes et gestion du preprocessing</a></li>
  <li><a href="#introduction-à-metaflow-netflix-et-tests-préliminaires" id="toc-introduction-à-metaflow-netflix-et-tests-préliminaires" class="nav-link" data-scroll-target="#introduction-à-metaflow-netflix-et-tests-préliminaires">Introduction à Metaflow (Netflix) et tests préliminaires</a></li>
  </ul></li>
  <li><a href="#reproductibilité-et-mlops" id="toc-reproductibilité-et-mlops" class="nav-link" data-scroll-target="#reproductibilité-et-mlops">10. Reproductibilité et MLOps</a>
  <ul class="collapse">
  <li><a href="#importance-de-la-reproductibilité-et-utilisation-des-cours-de-lensae" id="toc-importance-de-la-reproductibilité-et-utilisation-des-cours-de-lensae" class="nav-link" data-scroll-target="#importance-de-la-reproductibilité-et-utilisation-des-cours-de-lensae">Importance de la reproductibilité et utilisation des cours de l’ENSAE</a></li>
  <li><a href="#réalisation-dun-projet-mlops" id="toc-réalisation-dun-projet-mlops" class="nav-link" data-scroll-target="#réalisation-dun-projet-mlops">Réalisation d’un projet MLOps :</a></li>
  <li><a href="#exploration-de-spark-pour-le-calcul-et-le-streaming" id="toc-exploration-de-spark-pour-le-calcul-et-le-streaming" class="nav-link" data-scroll-target="#exploration-de-spark-pour-le-calcul-et-le-streaming">Exploration de Spark pour le calcul et le streaming</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul class="collapse">
  <li><a href="#bilan-du-stage-et-accomplissements" id="toc-bilan-du-stage-et-accomplissements" class="nav-link" data-scroll-target="#bilan-du-stage-et-accomplissements">Bilan du stage et accomplissements</a></li>
  <li><a href="#perspectives-futures-améliorations-et-extensions-possibles" id="toc-perspectives-futures-améliorations-et-extensions-possibles" class="nav-link" data-scroll-target="#perspectives-futures-améliorations-et-extensions-possibles">Perspectives futures : Améliorations et extensions possibles</a></li>
  <li><a href="#remerciements-et-réflexions-personnelles" id="toc-remerciements-et-réflexions-personnelles" class="nav-link" data-scroll-target="#remerciements-et-réflexions-personnelles">Remerciements et réflexions personnelles</a></li>
  </ul></li>
  <li><a href="#annexe" id="toc-annexe" class="nav-link" data-scroll-target="#annexe">Annexe</a>
  <ul class="collapse">
  <li><a href="#ressources-supplémentaires-notebooks-articles-tutoriels-dépôts-github" id="toc-ressources-supplémentaires-notebooks-articles-tutoriels-dépôts-github" class="nav-link" data-scroll-target="#ressources-supplémentaires-notebooks-articles-tutoriels-dépôts-github">Ressources supplémentaires : Notebooks, articles, tutoriels, dépôts Github</a></li>
  <li><a href="#détails-techniques-des-implémentations-et-configurations" id="toc-détails-techniques-des-implémentations-et-configurations" class="nav-link" data-scroll-target="#détails-techniques-des-implémentations-et-configurations">Détails techniques des implémentations et configurations</a></li>
  <li><a href="#bibliographie-et-références" id="toc-bibliographie-et-références" class="nav-link" data-scroll-target="#bibliographie-et-références">Bibliographie et références</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Rapport de stage 3A: Machine Learning appliqué à la cybersécurité</h1>
</div>

<div>
  <div class="description">
    Un rapport détaillé sur mon stage de 3e année au SOC, couvrant divers aspects de la cybersécurité et du machine learning.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mathieu Thomassin </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 31, 2024</p>
    </div>
  </div>
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>cybersécurité, machine learning, stage, rapport</p>
  </div>
</div>

</header>


<p><a href="index.pdf">Download PDF</a></p>
<section id="table-des-matières" class="level2">
<h2 class="anchored" data-anchor-id="table-des-matières">Table des matières</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#découverte-et-contexte">01 - Découverte et Contexte</a></li>
<li><a href="#recherche-et-collecte-de-données">02 - Recherche et Collecte de Données</a></li>
<li><a href="#choix-des-problèmes-et-des-outils-de-machine-learning">03 - Choix des Problèmes et des Outils de Machine Learning</a></li>
<li><a href="#exploration-de-modèles-et-outils-avancés">04 - Exploration de Modèles et Outils Avancés</a></li>
<li><a href="#anomaly-detection-et-modèles-de-classification">05 - Anomaly Detection et Modèles de Classification</a></li>
<li><a href="#exploration-darticles-scientifiques">06 - Exploration d’Articles Scientifiques</a></li>
<li><a href="#modélisation-et-évaluation-des-modèles">07 - Modélisation et Évaluation des Modèles</a></li>
<li><a href="#travail-avec-splunk-et-pipelines">08 - Travail avec Splunk et Pipelines</a></li>
<li><a href="#expérimentations-et-déploiement">09 - Expérimentations et Déploiement</a></li>
<li><a href="#reproductibilité-et-mlops">10 - Reproductibilité et MLOps</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#annexe">Annexe</a></li>
</ul>
</section>
<section id="présentation-du-stagiaire-et-du-maître-de-stage" class="level2">
<h2 class="anchored" data-anchor-id="présentation-du-stagiaire-et-du-maître-de-stage">Présentation du stagiaire et du maître de stage</h2>
<ul>
<li><strong>Stagiaire</strong> : Mathieu THOMASSIN</li>
<li><strong>Maître de stage</strong> : Michael ORSUCCI, responsable du <em>Security Operation Center</em> de l’Insee</li>
<li><strong>Titre du stage</strong> : Machine Learning appliqué à la cybersécurité</li>
</ul>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>L’Insee a renforcé récemment ses capacités opérationnelles en termes de cybersécurité via notamment la création de son SOC (Security Operation Center) en septembre 2023. Devant la quantité de données et leur diversité et face aux évolutions des techniques et tactiques des attaquants, les méthodes de détection de cyberattaques peuvent avoir des limites. L’application d’algorithmes de Machine Learning peut aider les analystes SOC à repérer des attaques. Se déroulant au sein de l’équipe SOC construite depuis peu, le stage va permettre d’appliquer des techniques de Machine Learning et de deep learning sur des jeux de données réelles, afin de participer à la détection d’incidents de sécurité.</p>
<section id="présentation-de-lorganisation" class="level3">
<h3 class="anchored" data-anchor-id="présentation-de-lorganisation">Présentation de l’organisation</h3>
<p>L’Insee a renforcé récemment ses capacités opérationnelles en termes de cybersécurité via notamment la création de son SOC (Security Operation Center) en septembre 2023. Cette équipe est répartie entre les sites de la DR de Nantes et la DR de Metz et a pour objectif de renforcer la sécurité du système d’information (SI).</p>
</section>
<section id="contexte-général-du-stage" class="level3">
<h3 class="anchored" data-anchor-id="contexte-général-du-stage">Contexte général du stage</h3>
<p>Devant la quantité de données et leur diversité et face aux évolutions des techniques et tactiques des attaquants, les méthodes de détection de cyberattaques peuvent avoir des limites. L’application d’algorithmes de Machine Learning peut aider les analystes SOC à repérer des attaques. Le stage avait donc pour but de permettre d’appliquer des techniques de Machine Learning et de deep learning sur des jeux de données réelles, afin de participer à la détection d’incidents de sécurité.</p>
</section>
<section id="objectifs-du-stage" class="level3">
<h3 class="anchored" data-anchor-id="objectifs-du-stage">Objectifs du stage</h3>
<section id="objectifs-principaux" class="level4">
<h4 class="anchored" data-anchor-id="objectifs-principaux">Objectifs principaux</h4>
<p>Il s’agissait d’appliquer des techniques de détection de requêtes malveillantes arrivant dans le SI de l’Insee. Les requêtes arrivant au sein du SI peuvent être centralisées par un SIEM (Security Information and Event Management).</p>
</section>
<section id="résultats-attendus" class="level4">
<h4 class="anchored" data-anchor-id="résultats-attendus">Résultats attendus</h4>
<ul>
<li>Offrir un service s’ajoutant au SIEM permettant d’identifier des requêtes malveillantes.</li>
<li>Pouvoir comparer différents meilleurs modèles (au sens d’une recherche dans les hyperparamètres) entre eux.</li>
<li>Favoriser les bonnes pratiques du MLOps : reproductibilité, contrôle de version, automatisation, surveillance, collaboration.</li>
<li>Étendre la méthodologie à des jeux de données publics différents.</li>
<li>Explorer les algorithmes de détection d’anomalie.</li>
</ul>
</section>
</section>
<section id="importance-de-la-mission-pour-linsee" class="level3">
<h3 class="anchored" data-anchor-id="importance-de-la-mission-pour-linsee">Importance de la mission pour l’Insee</h3>
<p>À titre d’exemple, l’Insee détient l’application Elire. Une attaque réussie sur cette application perturberait le bon déroulement de la vie démocratique. Finaliser la formation d’attaché statisticien en s’appliquant à résoudre un problème concret avant une prise de poste dans un domaine proche.</p>
</section>
<section id="contexte-général-du-stage-1" class="level3">
<h3 class="anchored" data-anchor-id="contexte-général-du-stage-1">Contexte général du stage</h3>
<!-- - Pourquoi ce stage est-il pertinent dans votre parcours académique et professionnel ? -->
<p>Ce stage s’inscrit pleinement dans le parcours que j’ai progressivement construit tout au long de ma carrière à l’Insee. Débutant il y a plusieurs années sur un poste de contrôleur-programmeur, j’ai pu apprécier les cours d’informatique et de statistiques pendant mon parcours à l’Ensai. J’y ai suivi les options menant progressivement à se spécialiser jusqu’au master en Informatique et traitement des données.</p>
<p>Au cours de ma préparation et de l’obtention de la qualification d’analyste, ma curiosité pour la sécurité des systèmes d’information s’est particulièrement développée. L’analyse des requêtes au sein d’un réseau soulève de nombreuses questions : volume des données, méthode de traitement statistique avec le machine learning, rapidité et efficacité de ce traitement. C’est un domaine où les techniques de machine learning présentent un intérêt certain.</p>
<p>Les enjeux de la cybersécurité peuvent se révéler particulièrement lourds, comme on peut le découvrir dans les journaux pour de nombreuses organisations. Ce stage au SOC représente une opportunité unique de confronter ces intérêts théoriques à des problématiques concrètes de cybersécurité, renforçant ainsi mes compétences et ma compréhension dans un domaine en pleine expansion.</p>
</section>
<section id="importance-de-la-cybersécurité-et-du-machine-learning-dans-ce-domaine" class="level3">
<h3 class="anchored" data-anchor-id="importance-de-la-cybersécurité-et-du-machine-learning-dans-ce-domaine">Importance de la cybersécurité et du machine learning dans ce domaine</h3>
<!-- - Pourquoi la cybersécurité et le machine learning sont-ils cruciaux pour les entreprises aujourd'hui ? -->
<p>La cybersécurité et le machine learning sont cruciaux pour les entreprises aujourd’hui pour plusieurs raisons. D’une part, la cybersécurité est essentielle pour protéger les données sensibles contre les cyberattaques qui sont de plus en plus sophistiquées et fréquentes. Les conséquences d’une faille de sécurité peuvent être dévastatrices pour l’Insee, incluant des pertes de données, des dommages à la réputation et la crédibilité de l’Institut, et des impacts sur les utilisateurs.</p>
<p>D’autre part, le machine learning offre des outils puissants pour détecter et prévenir les menaces en temps réel. Grâce à ses capacités de traitement et d’analyse de vastes quantités de données, le machine learning peut identifier des modèles et des anomalies que les méthodes traditionnelles pourraient manquer. Par exemple, la DSI a déployé sur le poste de chaque agent HarfangLab, un outil de sécurité informatique reposant sur des modèles de machine learning pour détecter la présence de logiciels malveillants, des malware, et permettant d’isoler le poste compromis.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://harfanglab.io/"><img src="figures/HarfangLab.png" title="HarfangLab" class="img-fluid figure-img" style="width:40.0%" alt="HarfangLab, déployé sur le poste de travail"></a></p>
<figcaption>HarfangLab, déployé sur le poste de travail</figcaption>
</figure>
</div>
<p>Le machine learning permettrait également de réduire le travail des analystes du SOC en classifiant automatiquement les requêtes comme bégnines ou malveillante.</p>
</section>
<section id="objectifs-du-stage-1" class="level3">
<h3 class="anchored" data-anchor-id="objectifs-du-stage-1">Objectifs du stage</h3>
<!-- - Pourquoi avez-vous défini ces objectifs spécifiques ? -->
<p>En débutant ce stage, j’avais pour but de pouvoir réaliser des objectifs à la fois académiques, en lien avec mes intérêts développés lors de la scolarité, ainsi que des objectifs professionnels, me permettant de m’insérer au mieux dans la structure de l’Insee pour débuter ma carrière d’attaché.</p>
<ol type="1">
<li><p><strong>Alignement avec mes objectifs de carrière</strong> : Ce stage présentait une opportunité unique de développer des compétences à la fois en statistique et en informatique. De plus, au lieu de se dérouler dans un service de développement, il a eu lieu dans un service de production, ce qui m’a permis de découvrir une autre perspective de l’informatique par rapport à l’informatique de type “data science” pratiquée à l’Ensai. En renforçant mes compétences en machine learning et en informatique, j’ai donc pu acquérir de l’expérience pour de futurs rôles au sein de l’Insee.</p></li>
<li><p><strong>Développement de compétences spécifiques</strong> : Pour réaliser la tâche principale de ce stage, j’avais besoin de maîtriser des techniques de machine learning et de deep learning appliquées à la cybersécurité, ainsi que de les inscrire dans une approche de type DevOps ou MLOps. Il m’a donc fallu utiliser des outils comme Scikit-learn, MLflow, des techniques de deep learning, et utiliser le cluster Kubernetes pour entraîner et déployer un modèle avec une API.</p></li>
<li><p><strong>Application pratique des connaissances théoriques</strong> : Si j’ai appris à faire du machine learning à l’école et y ai découvert des notions de DevOps, ce n’est qu’en arrivant en stage que j’ai pu découvrir l’étendue des problèmes pratiques que cela peut poser. Isolés, dans des environnements de travail bien conçus, voire seulement à travers une présentation théorique, les cours m’ont permis d’acquérir des connaissances. Cependant, c’est seulement en travaillant sur des projets réels que j’ai pu répondre de façon pratique en piochant dans la boîte à outils de mes cours.</p></li>
<li><p><strong>Contribution à l’organisation d’accueil</strong> : Débutant dans le domaine de la cybersécurité, je n’avais pas pour objectif d’apporter une solution exploitable en production. En revanche, il était essentiel pour moi de démontrer ma capacité future à prendre une position d’ingénieur capable d’envisager un problème nouveau et d’y apporter une solution pratique exploitable par une équipe. La création d’un socle d’entraînement pour un modèle de détection de requêtes malveillantes, destiné à être utilisé par des utilisateurs, sert cet objectif.</p></li>
<li><p><strong>Exploration des défis et opportunités</strong> : Face à un nouveau problème pour moi, j’ai voulu prendre le temps d’explorer certaines spécificités liées à la cybersécurité et les pratiques MLOps. J’ai donc recherché, à travers le web, dans des livres et des articles, les méthodes classiques en machine learning pour améliorer la sécurité des systèmes d’information ainsi que les façons possibles de les mettre en œuvre de manière robuste et reproductible.</p></li>
</ol>
<p>Ces objectifs m’ont permis de m’assurer que ce stage serait bénéfique pour mon parcours comme pour l’Insee. Cependant, s’ils apparaissent rétrospectivement relativement clairs, ils ont pourtant été construits au fur et à mesure de mon avancée comme nous allons maintenant l’explorer.</p>
</section>
</section>
<section id="découverte-et-contexte" class="level2">
<h2 class="anchored" data-anchor-id="découverte-et-contexte">1. Découverte et Contexte</h2>
<section id="premiers-pas-dans-le-stage-enthousiasme-et-incertitude" class="level3">
<h3 class="anchored" data-anchor-id="premiers-pas-dans-le-stage-enthousiasme-et-incertitude">Premiers pas dans le stage : Enthousiasme et incertitude</h3>
<!-- - Pourquoi avez-vous ressenti ces sentiments au début ? -->
<ul>
<li><p><strong>Sentiments initiaux</strong> : Avant de commencer le stage, j’avais pu discuter avec le RSSI (Responsable Sécurité du Système d’Information) et le DSI (Directeur du Système d’Information) de l’Insee au cours d’une formation interne avant l’oral de la qualification d’analyste. J’étais plutôt impressionné par les enjeux, le SI de l’Insee étant régulièrement la cible d’attaques dont j’entendais parler. Cependant, si je savais que je n’étais pas formé comme un “véritable” informaticien <span class="citation" data-cites="noauthor_mi-2020-2_nodate">(<a href="#ref-noauthor_mi-2020-2_nodate" role="doc-biblioref">n.d.</a>)</span>, n’ayant reçu qu’une “sensibilisation à l’informatique de production ou à la sécurité” <span class="citation" data-cites="noauthor_mi-2020-2_nodate-1">(<a href="#ref-noauthor_mi-2020-2_nodate-1" role="doc-biblioref">n.d.</a>)</span> p55, j’avais plutôt confiance dans mes récentes capacités à traiter des données et dans mon envie de découvrir le domaine.</p></li>
<li><p><strong>Raisons de ces sentiments</strong> : Lors de la scolarité, j’avais pris l’habitude d’explorer les rayonnages de la bibliothèque de l’Ensai, et j’y avais repéré un livre <span class="citation" data-cites="chio_machine_nodate">(<a href="#ref-chio_machine_nodate" role="doc-biblioref">n.d.</a>)</span> sur le machine learning et la sécurité. Me remémorant ce dont m’avait parlé mon ancien maître de stage sur le plan de reprise d’activité de l’application critique Elire, et en sachant qu’un système informatique génère une quantité de données sur lesquelles il est possible de travailler pour mieux en comprendre les rouages, la perspective de travailler sur la sécurité du SI de l’Insee m’intéressait beaucoup. Cependant, je n’avais pas encore d’idée sur l’application concrète d’un tel projet, ce qui me plongeait dans une certaine incertitude.</p></li>
<li><p><strong>Objectifs personnels initiaux</strong> : C’est pourquoi, j’avais tout d’abord comme objectif de mieux comprendre ce qu’il était possible de faire en sécurité informatique au sein de l’Insee. N’y avait-il pas déjà des outils externes très performants ? Qu’était-il possible d’apporter en tant qu’attaché statisticien débutant ?</p></li>
</ul>
</section>
<section id="introduction-à-la-cybersécurité-définition-et-importance" class="level3">
<h3 class="anchored" data-anchor-id="introduction-à-la-cybersécurité-définition-et-importance">Introduction à la cybersécurité : Définition et importance</h3>
<!-- - Pourquoi est-il important de comprendre les bases de la cybersécurité dès le début ? -->
<ul>
<li><p><strong>Définition de la cybersécurité</strong> : La cybersécurité consiste à protéger les systèmes, les réseaux et les programmes contre les attaques numériques. <span class="citation" data-cites="noauthor_quest-ce_nodate">(<a href="#ref-noauthor_quest-ce_nodate" role="doc-biblioref">n.d.</a>)</span> Elle vise à garantir la confidentialité, l’intégrité et la disponibilité des informations. Assurer la sécurité du système d’information (SSI) consiste à gérer les risques de sécurité selon une démarche en trois étapes: lister, évaluer et traiter les risques. <span class="citation" data-cites="noauthor_dechiffrer_nodate">(<a href="#ref-noauthor_dechiffrer_nodate" role="doc-biblioref">n.d.</a>)</span> La notion de SOC, <em>Security Operation Center</em>, devient alors essentiel pour mettre en oeuvre une politique de cybersécurité. UN SOC, doit “monitorer l’ensemble des composants d’un système d’information et être capable de détecter et de sélectionner parmi des milliards d’octets des éléments caractéritiques d’une cyberattaque” <span class="citation" data-cites="noauthor_cybersecurite_2024">(<a href="#ref-noauthor_cybersecurite_2024" role="doc-biblioref">2024</a>)</span>.</p></li>
<li><p><strong>Importance de la cybersécurité</strong> : Une attaque informatique a aujourd’hui d’autant plus de valeur que l’activité des organisations est pratiquement toujours menée à l’aide d’outils informatiques. Sans défendre correctement cet outil, la continuité de l’activité est menacée d’interruption plus ou moins forte. La cybersécurité cherche également à protéger les données sensibles et personnelles, notamment au travers de l’obligation légale issue du Règlement Général sur la Protection des Données (RGPD). La confiance que le grand public accorde à l’Insee serait amoindrie en cas d’attaque réussie. C’est pourquoi la cybersécurité doit faire l’objet d’un soin permanent par l’Insee.</p></li>
<li><p><strong>Liens avec le machine learning</strong> : La cybersécurité est très naturellement un domaine d’application du machine learning. En effet, on peut y obtenir des jeux de données robustes qui permettront “d’annuler certains des progrès les plus complexes dans la compétence des attaquants”. Le machine learning peut ainsi améliorer ou remplacer les “solutions basées sur des règles dans des problèmes comme la détection d’intrusion, la classification des logiciels malveillants ou l’analyse réseau” (<span class="citation" data-cites="chio_machine_nodate">(<a href="#ref-chio_machine_nodate" role="doc-biblioref">n.d., 5–6</a>)</span> ).</p></li>
</ul>
</section>
<section id="présentation-de-léquipe-soc-et-du-système-dinformation-si" class="level3">
<h3 class="anchored" data-anchor-id="présentation-de-léquipe-soc-et-du-système-dinformation-si">Présentation de l’équipe SOC et du système d’information (SI)</h3>
<!-- - Pourquoi la compréhension de l'équipe et du SI est-elle cruciale pour votre stage ? -->
<section id="structure-de-léquipe-soc" class="level4">
<h4 class="anchored" data-anchor-id="structure-de-léquipe-soc">Structure de l’équipe SOC</h4>
<p>L’équipe SOC de l’Insee a été créée en 2023 et est constituée de 6 membres répartis sur deux sites : Nantes et Metz. Son objectif principal est d’établir et de mettre en œuvre la politique de sécurité du système d’information (SI) de l’Insee. L’équipe est dirigée par un responsable unique qui pilote les travaux de manière transversale entre les deux sites. Les membres de l’équipe incluent des analystes de sécurité, des ingénieurs en cybersécurité, et des experts en gestion des incidents.</p>
</section>
<section id="fonctionnement-du-soc" class="level4">
<h4 class="anchored" data-anchor-id="fonctionnement-du-soc">Fonctionnement du SOC</h4>
<p>L’équipe SOC a pour mission de surveiller en permanence le SI de l’Insee afin de détecter, qualifier et remédier aux incidents de sécurité. Les principales activités du SOC incluent <span class="citation" data-cites="noauthor_57snssi03020ac_nodate">(<a href="#ref-noauthor_57snssi03020ac_nodate" role="doc-biblioref">n.d.</a>)</span>:</p>
<ul>
<li><p><strong>Veille et qualification des vulnérabilités</strong> : Identifier quotidiennement les vulnérabilités affectant le SI de l’Insee et évaluer leur impact potentiel.</p></li>
<li><p><strong>Conception de solutions de sécurité</strong> : Développer et mettre en place des solutions technologiques pour renforcer la sécurité du SI, notamment par la mise en place de solutions techniques innovantes pour garantir la sécurité du SI.</p></li>
<li><p><strong>Détection et gestion des incidents</strong> : Utiliser des outils avancés comme le SIEM (Security Information and Event Management) ou des EDR (Endpoint Detection and Response) pour détecter les activités suspectes et les incidents de sécurité, puis élaborer et mettre en œuvre des plans de remédiation en collaboration avec les équipes concernées.</p></li>
<li><p><strong>Maintien en condition de sécurité</strong> : Assurer la sécurité continue des différents systèmes d’information en surveillant les infrastructures et en veillant à l’application des correctifs nécessaires.</p></li>
<li><p><strong>Support et expertise</strong> : Apporter une expertise en sécurité aux différentes unités de l’Insee, conseiller sur les meilleures pratiques et aider à la décision en matière de sécurité informatique.</p></li>
</ul>
<p>L’équipe SOC joue un rôle crucial dans la préservation de l’intégrité, de la confidentialité et de la disponibilité des données et des systèmes de l’Insee. Leur travail permet de protéger les actifs numériques de l’organisation contre une variété de menaces cybernétiques.</p>
<ul>
<li><strong>Présentation du SI</strong> : Le système d’information de l’Insee est documenté sur un wiki interne <span class="citation" data-cites="noauthor_reseau_2024">(<a href="#ref-noauthor_reseau_2024" role="doc-biblioref">2024</a>)</span>. On peut notamment y trouver des schémas sur l’architecture du SI de production, mais pas sur celle du SI d’administration. L’architecture du SIA est très fortement guidée par les recommandations de l’anssi. <span class="citation" data-cites="noauthor_recommandations_nodate">(<a href="#ref-noauthor_recommandations_nodate" role="doc-biblioref">n.d.</a>)</span> Pour l’essentiel, on peut retenir une organisation en 3 couches.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/schema_SI_simplifie.png" title="SI de l'Insee" class="img-fluid figure-img"></p>
<figcaption>Schéma simplifié du Système d’Information de l’Insee</figcaption>
</figure>
</div>
</section>
</section>
<section id="compréhension-du-siem-et-des-logs" class="level3">
<h3 class="anchored" data-anchor-id="compréhension-du-siem-et-des-logs">Compréhension du SIEM et des logs</h3>
<!-- - Pourquoi le SIEM et les logs sont-ils essentiels dans le contexte de la cybersécurité ? -->
<ul>
<li><strong>Rôle du SIEM</strong> : Expliquez ce qu’est un SIEM (Security Information and Event Management) et son rôle dans la cybersécurité.</li>
<li><strong>Utilisation des logs</strong> : Décrivez l’importance des logs dans la détection des incidents de sécurité.</li>
<li><strong>Intégration des logs dans le SIEM</strong> : Mentionnez comment les logs sont intégrés et utilisés par le SIEM pour la surveillance et la détection des menaces.</li>
</ul>
</section>
</section>
<section id="recherche-et-collecte-de-données" class="level2">
<h2 class="anchored" data-anchor-id="recherche-et-collecte-de-données">2. Recherche et Collecte de Données</h2>
<section id="attente-de-splunk-et-recherche-de-datasets-pertinents" class="level3">
<h3 class="anchored" data-anchor-id="attente-de-splunk-et-recherche-de-datasets-pertinents">Attente de Splunk et recherche de datasets pertinents</h3>
<!-- - Pourquoi avez-vous choisi d'utiliser Splunk et quels critères ont guidé la recherche des datasets ? -->
<ul>
<li><p>Types de données : Réseau, logs, HTTP <!-- - Pourquoi ces types de données spécifiques sont-ils importants ? --></p></li>
<li><p>Sélection et préparation des datasets <!-- - Pourquoi cette étape est-elle critique pour la suite du projet ? --></p></li>
</ul>
</section>
<section id="présentation-des-premières-données-obtenues" class="level3">
<h3 class="anchored" data-anchor-id="présentation-des-premières-données-obtenues">Présentation des premières données obtenues</h3>
<!-- - Pourquoi ces données sont-elles pertinentes pour votre projet ? -->
</section>
</section>
<section id="choix-des-problèmes-et-des-outils-de-machine-learning" class="level2">
<h2 class="anchored" data-anchor-id="choix-des-problèmes-et-des-outils-de-machine-learning">3. Choix des Problèmes et des Outils de Machine Learning</h2>
<section id="définition-des-problèmes-de-machine-learning-en-cybersécurité" class="level3">
<h3 class="anchored" data-anchor-id="définition-des-problèmes-de-machine-learning-en-cybersécurité">Définition des problèmes de machine learning en cybersécurité</h3>
<!-- - Pourquoi est-il crucial de bien définir les problèmes avant de choisir les outils ? -->
</section>
<section id="introduction-à-scikit-learn-et-choix-des-modèles" class="level3">
<h3 class="anchored" data-anchor-id="introduction-à-scikit-learn-et-choix-des-modèles">Introduction à Scikit-learn et choix des modèles</h3>
<!-- - Pourquoi avez-vous choisi Scikit-learn et ces modèles spécifiques ? -->
</section>
<section id="formation-à-linterprétabilité-des-modèles" class="level3">
<h3 class="anchored" data-anchor-id="formation-à-linterprétabilité-des-modèles">Formation à l’interprétabilité des modèles</h3>
<!-- - Pourquoi l'interprétabilité est-elle importante dans le contexte de la cybersécurité ? -->
</section>
</section>
<section id="exploration-de-modèles-et-outils-avancés" class="level2">
<h2 class="anchored" data-anchor-id="exploration-de-modèles-et-outils-avancés">4. Exploration de Modèles et Outils Avancés</h2>
<section id="essais-avec-xgboost-pour-la-classification-des-malwares" class="level3">
<h3 class="anchored" data-anchor-id="essais-avec-xgboost-pour-la-classification-des-malwares">Essais avec XGBoost pour la classification des malwares</h3>
<!-- - Pourquoi avez-vous choisi XGBoost pour ce problème ? -->
</section>
<section id="découverte-de-mlflow-et-utilisation-de-lapi" class="level3">
<h3 class="anchored" data-anchor-id="découverte-de-mlflow-et-utilisation-de-lapi">Découverte de MLflow et utilisation de l’API</h3>
<!-- - Pourquoi MLflow est-il utile pour votre projet ? -->
</section>
<section id="introduction-au-deep-learning-avec-le-livre-deep-learning-from-scratch-dlfs" class="level3">
<h3 class="anchored" data-anchor-id="introduction-au-deep-learning-avec-le-livre-deep-learning-from-scratch-dlfs">Introduction au deep learning avec le livre “Deep Learning from Scratch” (DLFS)</h3>
<!-- - Pourquoi ce livre et le deep learning sont-ils pertinents pour vos objectifs ? -->
</section>
<section id="exploration-des-design-patterns-en-deep-learning" class="level3">
<h3 class="anchored" data-anchor-id="exploration-des-design-patterns-en-deep-learning">Exploration des design patterns en deep learning</h3>
<!-- - Pourquoi est-il important de comprendre ces design patterns ? -->
</section>
</section>
<section id="anomaly-detection-et-modèles-de-classification" class="level2">
<h2 class="anchored" data-anchor-id="anomaly-detection-et-modèles-de-classification">5. Anomaly Detection et Modèles de Classification</h2>
<section id="détour-par-la-détection-danomalies-difficultés-et-recentrage" class="level3">
<h3 class="anchored" data-anchor-id="détour-par-la-détection-danomalies-difficultés-et-recentrage">Détour par la détection d’anomalies : Difficultés et recentrage</h3>
<!-- - Pourquoi avez-vous rencontré ces difficultés et comment avez-vous réajusté votre approche ? -->
</section>
<section id="analyses-simples-avec-knn-et-clustering" class="level3">
<h3 class="anchored" data-anchor-id="analyses-simples-avec-knn-et-clustering">Analyses simples avec KNN et clustering</h3>
<!-- - Pourquoi avez-vous choisi ces méthodes pour l'analyse initiale ? -->
</section>
<section id="analyse-des-données-http-et-détection-des-attaques-ex.-ddos" class="level3">
<h3 class="anchored" data-anchor-id="analyse-des-données-http-et-détection-des-attaques-ex.-ddos">Analyse des données HTTP et détection des attaques (ex. DDOS)</h3>
<!-- - Pourquoi ces types d'attaques sont-ils une priorité dans votre analyse ? -->
</section>
<section id="focalisation-sur-lanalyse-des-url-et-compréhension-des-attaques" class="level3">
<h3 class="anchored" data-anchor-id="focalisation-sur-lanalyse-des-url-et-compréhension-des-attaques">Focalisation sur l’analyse des URL et compréhension des attaques</h3>
<!-- - Pourquoi l'analyse des URL est-elle cruciale dans la détection des attaques ? -->
</section>
</section>
<section id="exploration-darticles-scientifiques" class="level2">
<h2 class="anchored" data-anchor-id="exploration-darticles-scientifiques">6. Exploration d’Articles Scientifiques</h2>
<section id="lecture-et-analyse-de-larticle-machine-learning-for-cybersecurity-applications-de-la-west-virginia-university-wvu" class="level3">
<h3 class="anchored" data-anchor-id="lecture-et-analyse-de-larticle-machine-learning-for-cybersecurity-applications-de-la-west-virginia-university-wvu">Lecture et analyse de l’article “Machine Learning for Cybersecurity Applications” de la West Virginia University (WVU)</h3>
<!-- - Pourquoi cet article est-il pertinent pour votre travail ? -->
</section>
<section id="étude-de-a-comprehensive-review-of-anomaly-detection-in-web-logs-du-hasso-plattner-institute-hpi" class="level3">
<h3 class="anchored" data-anchor-id="étude-de-a-comprehensive-review-of-anomaly-detection-in-web-logs-du-hasso-plattner-institute-hpi">Étude de “A Comprehensive Review of Anomaly Detection in Web Logs” du Hasso Plattner Institute (HPI)</h3>
<!-- - Pourquoi cet article est-il pertinent pour votre travail ? -->
</section>
<section id="analyse-de-larticle-crisis2020_easychair_pid_011" class="level3">
<h3 class="anchored" data-anchor-id="analyse-de-larticle-crisis2020_easychair_pid_011">Analyse de l’article “CRISIS2020_EasyChair_PID_011”</h3>
<!-- - Pourquoi cet article est-il pertinent pour votre travail ? -->
</section>
<section id="exploration-de-conf_sin2022__swaf-pour-le-développement-dun-pare-feu-applicatif-basé-sur-du-machine-learning" class="level3">
<h3 class="anchored" data-anchor-id="exploration-de-conf_sin2022__swaf-pour-le-développement-dun-pare-feu-applicatif-basé-sur-du-machine-learning">Exploration de “Conf_SIN2022__SWAF” pour le développement d’un pare-feu applicatif basé sur du machine learning</h3>
<!-- - Pourquoi cet article est-il pertinent pour votre travail ? -->
</section>
</section>
<section id="modélisation-et-évaluation-des-modèles" class="level2">
<h2 class="anchored" data-anchor-id="modélisation-et-évaluation-des-modèles">7. Modélisation et Évaluation des Modèles</h2>
<section id="modélisation-des-url-knn-svm-regression-logistique-cnn" class="level3">
<h3 class="anchored" data-anchor-id="modélisation-des-url-knn-svm-regression-logistique-cnn">Modélisation des URL : KNN, SVM, regression logistique, CNN</h3>
<!-- - Pourquoi avez-vous choisi ces modèles spécifiques pour la modélisation des URL ? -->
</section>
<section id="utilisation-de-chatgpt-et-des-gpu-pour-accélérer-le-développement" class="level3">
<h3 class="anchored" data-anchor-id="utilisation-de-chatgpt-et-des-gpu-pour-accélérer-le-développement">Utilisation de ChatGPT et des GPU pour accélérer le développement</h3>
<!-- - Pourquoi ces outils ont-ils été utilisés pour accélérer le développement ? -->
</section>
<section id="organisation-des-priorités-et-gestion-des-expérimentations" class="level3">
<h3 class="anchored" data-anchor-id="organisation-des-priorités-et-gestion-des-expérimentations">Organisation des priorités et gestion des expérimentations</h3>
<!-- - Pourquoi cette organisation est-elle importante pour la réussite de votre projet ? -->
</section>
</section>
<section id="travail-avec-splunk-et-pipelines" class="level2">
<h2 class="anchored" data-anchor-id="travail-avec-splunk-et-pipelines">8. Travail avec Splunk et Pipelines</h2>
<section id="traitement-des-données-splunk-en-préproduction" class="level3">
<h3 class="anchored" data-anchor-id="traitement-des-données-splunk-en-préproduction">Traitement des données Splunk en préproduction</h3>
<!-- - Pourquoi le traitement des données en préproduction est-il nécessaire ? -->
</section>
<section id="tokenization-des-url-et-limitations" class="level3">
<h3 class="anchored" data-anchor-id="tokenization-des-url-et-limitations">Tokenization des URL et limitations</h3>
<!-- - Pourquoi avez-vous utilisé cette méthode de tokenization et quelles en sont les limites ? -->
</section>
<section id="développement-de-pipelines-et-utilisation-de-gridsearchcv" class="level3">
<h3 class="anchored" data-anchor-id="développement-de-pipelines-et-utilisation-de-gridsearchcv">Développement de pipelines et utilisation de GridsearchCV</h3>
<!-- - Pourquoi ces techniques sont-elles cruciales pour optimiser les modèles ? -->
</section>
<section id="évaluation-des-performances-des-modèles" class="level3">
<h3 class="anchored" data-anchor-id="évaluation-des-performances-des-modèles">Évaluation des performances des modèles</h3>
<!-- - Pourquoi une évaluation rigoureuse des performances est-elle essentielle ? -->
</section>
</section>
<section id="expérimentations-et-déploiement" class="level2">
<h2 class="anchored" data-anchor-id="expérimentations-et-déploiement">9. Expérimentations et Déploiement</h2>
<section id="utilisation-de-mlflow-pour-la-gestion-des-expérimentations" class="level3">
<h3 class="anchored" data-anchor-id="utilisation-de-mlflow-pour-la-gestion-des-expérimentations">Utilisation de MLFlow pour la gestion des expérimentations</h3>
<!-- - Pourquoi MLFlow est-il un choix stratégique pour gérer les expérimentations ? -->
</section>
<section id="apprentissage-à-requêter-et-déployer-un-modèle-via-une-api" class="level3">
<h3 class="anchored" data-anchor-id="apprentissage-à-requêter-et-déployer-un-modèle-via-une-api">Apprentissage à requêter et déployer un modèle via une API</h3>
<!-- - Pourquoi cette compétence est-elle importante dans le cadre de votre stage ? -->
</section>
<section id="déploiement-sur-un-cluster-kubernetes-et-gestion-du-preprocessing" class="level3">
<h3 class="anchored" data-anchor-id="déploiement-sur-un-cluster-kubernetes-et-gestion-du-preprocessing">Déploiement sur un cluster Kubernetes et gestion du preprocessing</h3>
<!-- - Pourquoi Kubernetes et le preprocessing sont-ils importants pour le déploiement ? -->
</section>
<section id="introduction-à-metaflow-netflix-et-tests-préliminaires" class="level3">
<h3 class="anchored" data-anchor-id="introduction-à-metaflow-netflix-et-tests-préliminaires">Introduction à Metaflow (Netflix) et tests préliminaires</h3>
<!-- - Pourquoi avez-vous exploré Metaflow et quels avantages cela apporte-t-il ? -->
</section>
</section>
<section id="reproductibilité-et-mlops" class="level2">
<h2 class="anchored" data-anchor-id="reproductibilité-et-mlops">10. Reproductibilité et MLOps</h2>
<section id="importance-de-la-reproductibilité-et-utilisation-des-cours-de-lensae" class="level3">
<h3 class="anchored" data-anchor-id="importance-de-la-reproductibilité-et-utilisation-des-cours-de-lensae">Importance de la reproductibilité et utilisation des cours de l’ENSAE</h3>
<!-- - Pourquoi la reproductibilité est-elle critique dans le domaine du machine learning ? -->
</section>
<section id="réalisation-dun-projet-mlops" class="level3">
<h3 class="anchored" data-anchor-id="réalisation-dun-projet-mlops">Réalisation d’un projet MLOps :</h3>
<!-- - Pourquoi ces aspects spécifiques du MLOps sont-ils importants ? -->
</section>
<section id="exploration-de-spark-pour-le-calcul-et-le-streaming" class="level3">
<h3 class="anchored" data-anchor-id="exploration-de-spark-pour-le-calcul-et-le-streaming">Exploration de Spark pour le calcul et le streaming</h3>
<!-- - Pourquoi Spark est-il un outil pertinent pour vos objectifs ? -->
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<section id="bilan-du-stage-et-accomplissements" class="level3">
<h3 class="anchored" data-anchor-id="bilan-du-stage-et-accomplissements">Bilan du stage et accomplissements</h3>
<!-- - Pourquoi ces réalisations sont-elles significatives ? -->
</section>
<section id="perspectives-futures-améliorations-et-extensions-possibles" class="level3">
<h3 class="anchored" data-anchor-id="perspectives-futures-améliorations-et-extensions-possibles">Perspectives futures : Améliorations et extensions possibles</h3>
<!-- - Pourquoi ces améliorations sont-elles envisagées ? -->
</section>
<section id="remerciements-et-réflexions-personnelles" class="level3">
<h3 class="anchored" data-anchor-id="remerciements-et-réflexions-personnelles">Remerciements et réflexions personnelles</h3>
<!-- - Pourquoi ces personnes/expériences sont-elles importantes pour vous ? -->
</section>
</section>
<section id="annexe" class="level2">
<h2 class="anchored" data-anchor-id="annexe">Annexe</h2>
<section id="ressources-supplémentaires-notebooks-articles-tutoriels-dépôts-github" class="level3">
<h3 class="anchored" data-anchor-id="ressources-supplémentaires-notebooks-articles-tutoriels-dépôts-github">Ressources supplémentaires : Notebooks, articles, tutoriels, dépôts Github</h3>
<!-- - Pourquoi ces ressources sont-elles utiles ? -->
<section id="gantt" class="level4">
<h4 class="anchored" data-anchor-id="gantt">Gantt</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/gantt.png" class="img-fluid figure-img"></p>
<figcaption>Gant</figcaption>
</figure>
</div>
</section>
</section>
<section id="détails-techniques-des-implémentations-et-configurations" class="level3">
<h3 class="anchored" data-anchor-id="détails-techniques-des-implémentations-et-configurations">Détails techniques des implémentations et configurations</h3>
<!-- - Pourquoi ces détails techniques sont-ils importants pour la compréhension de votre travail ? -->
</section>
<section id="bibliographie-et-références" class="level3">

<!-- - Pourquoi ces références ont-elles été utilisées ? -->



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Bibliographie et références</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-noauthor_57snssi03020ac_nodate" class="csl-entry" role="listitem">
<span>“<span>57SNSSI03020Ac</span> - <span>Analyste</span> Du <span>Security</span> <span>Operations</span> <span>Center</span> (<span>SOC</span>).”</span> n.d. <em>Intranet INSEE</em>. Accessed August 7, 2024. <a href="https://intranet.insee.fr/jcms/32252877_DBFileDocument/fr/57snssi03020ac-analyste-du-security-operations-center-soc?details=true">https://intranet.insee.fr/jcms/32252877_DBFileDocument/fr/57snssi03020ac-analyste-du-security-operations-center-soc?details=true</a>.
</div>
<div id="ref-chio_machine_nodate" class="csl-entry" role="listitem">
Chio, Clarence, and David Freeman. n.d. <span>“Machine <span>Learning</span> Et Sécurité [<span>Book</span>].”</span> Accessed August 6, 2024. <a href="https://www.oreilly.com/library/view/machine-learning-et/9782412043561/">https://www.oreilly.com/library/view/machine-learning-et/9782412043561/</a>.
</div>
<div id="ref-noauthor_cybersecurite_2024" class="csl-entry" role="listitem">
<span>“Cybersécurité.”</span> 2024. <em>Wikipédia</em>. <a href="https://fr.wikipedia.org/w/index.php?title=Cybers%C3%A9curit%C3%A9&amp;oldid=215272230">https://fr.wikipedia.org/w/index.php?title=Cybers%C3%A9curit%C3%A9&amp;oldid=215272230</a>.
</div>
<div id="ref-noauthor_dechiffrer_nodate" class="csl-entry" role="listitem">
<span>“Déchiffrer Le <span>Mag</span> 12 (Décembre 2023) - Version Pdf Accessible.”</span> n.d. <em>Intranet INSEE</em>. Accessed August 6, 2024. <a href="https://intranet.insee.fr/jcms/29406323_DBFileDocument/fr/dechiffrer-le-mag-12-decembre-2023-version-pdf-accessible?details=true">https://intranet.insee.fr/jcms/29406323_DBFileDocument/fr/dechiffrer-le-mag-12-decembre-2023-version-pdf-accessible?details=true</a>.
</div>
<div id="ref-noauthor_mi-2020-2_nodate" class="csl-entry" role="listitem">
<span>“<span>MI</span>-2020-2 <span>Carrieres</span> Informatiques <span>Insee</span> <span>CRCD</span>.”</span> n.d. <em>Intranet INSEE</em>. Accessed August 6, 2024. <a href="https://intranet.insee.fr/jcms/58667_DBFileDocument/fr/mi-2020-2-carrieres-informatiques-insee-crcd?details=true">https://intranet.insee.fr/jcms/58667_DBFileDocument/fr/mi-2020-2-carrieres-informatiques-insee-crcd?details=true</a>.
</div>
<div id="ref-noauthor_mi-2020-2_nodate-1" class="csl-entry" role="listitem">
<span>“<span>MI</span>-2020-2 <span>Carrieres</span> Informatiques <span>Insee</span> <span>Rapport</span>.”</span> n.d. <em>Intranet INSEE</em>. Accessed August 6, 2024. <a href="https://intranet.insee.fr/jcms/58657_DBFileDocument/fr/mi-2020-2-carrieres-informatiques-insee-rapport?details=true">https://intranet.insee.fr/jcms/58657_DBFileDocument/fr/mi-2020-2-carrieres-informatiques-insee-rapport?details=true</a>.
</div>
<div id="ref-noauthor_quest-ce_nodate" class="csl-entry" role="listitem">
<span>“Qu’est-Ce Que La Cybersécurité ?”</span> n.d. <em>Cisco</em>. Accessed August 6, 2024. <a href="https://www.cisco.com/c/fr_fr/products/security/what-is-cybersecurity.html">https://www.cisco.com/c/fr_fr/products/security/what-is-cybersecurity.html</a>.
</div>
<div id="ref-noauthor_recommandations_nodate" class="csl-entry" role="listitem">
<span>“Recommandations Relatives à l’administration Sécurisée Des <span>SI</span> <span></span> <span>ANSSI</span>.”</span> n.d. Accessed August 7, 2024. <a href="https://cyber.gouv.fr/publications/recommandations-relatives-ladministration-securisee-des-si">https://cyber.gouv.fr/publications/recommandations-relatives-ladministration-securisee-des-si</a>.
</div>
<div id="ref-noauthor_reseau_2024" class="csl-entry" role="listitem">
<span>“Reseau · <span>Wiki</span> · <span>Domaine</span> Production Informatique / <span>DPII</span> Pour <span>DSI</span> / <span>Documentation</span> Du <span>SI</span> · <span>GitLab</span>.”</span> 2024. <em>GitLab</em>. <a href="https://gitlab.insee.fr/domaine-production-informatique/dpii-pour-dsi/documentation-du-si/-/wikis/Reseau">https://gitlab.insee.fr/domaine-production-informatique/dpii-pour-dsi/documentation-du-si/-/wikis/Reseau</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>